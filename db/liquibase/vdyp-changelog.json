{
  "databaseChangeLog": [
    {
      "objectQuotingStrategy": "QUOTE_ALL_OBJECTS"
    },
     {
      "changeSet": {
        "id": "01_00_00_00",
        "author": "pminter",
        "changes": [
          {
            "tagDatabase": {
              "tag": "version_01_00_00_00"
            }
          },
          {
            "sqlFile": {
              "dbms": "postgresql",
              "endDelimiter": ";",
              "path": "scripts/01_00_00/00/ddl/tables/app-vdyp.file_set_type_code.sql",
              "relativeToChangelogFile": true
            }
          },
          {
            "sqlFile": {
              "dbms": "postgresql",
              "endDelimiter": ";",
              "path": "scripts/01_00_00/00/ddl/tables/app-vdyp.user_type_code.sql",
              "relativeToChangelogFile": true
            }
          },
          {
            "sqlFile": {
              "dbms": "postgresql",
              "endDelimiter": ";",
              "path": "scripts/01_00_00/00/ddl/tables/app-vdyp.vdyp_user.sql",
              "relativeToChangelogFile": true
            }
          },
          {
            "sqlFile": {
              "dbms": "postgresql",
              "endDelimiter": ";",
              "path": "scripts/01_00_00/00/ddl/tables/app-vdyp.projection_file_set.sql",
              "relativeToChangelogFile": true
            }
          },
          {
            "sqlFile": {
              "dbms": "postgresql",
              "endDelimiter": ";",
              "path": "scripts/01_00_00/00/ddl/tables/app-vdyp.file_mapping.sql",
              "relativeToChangelogFile": true
            }
          },
          {
            "sqlFile": {
              "dbms": "postgresql",
              "endDelimiter": ";",
              "path": "scripts/01_00_00/00/ddl/tables/app-vdyp.projection_status_code.sql",
              "relativeToChangelogFile": true
            }
          },
          {
            "sqlFile": {
              "dbms": "postgresql",
              "endDelimiter": ";",
              "path": "scripts/01_00_00/00/ddl/tables/app-vdyp.calculation_engine_code.sql",
              "relativeToChangelogFile": true
            }
          },
          {
            "sqlFile": {
              "dbms": "postgresql",
              "endDelimiter": ";",
              "path": "scripts/01_00_00/00/ddl/tables/app-vdyp.projection_param_preset.sql",
              "relativeToChangelogFile": true
            }
          },
          {
            "sqlFile": {
              "dbms": "postgresql",
              "endDelimiter": ";",
              "path": "scripts/01_00_00/00/ddl/tables/app-vdyp.projection.sql",
              "relativeToChangelogFile": true
            }
          },
          {
            "sqlFile": {
              "dbms": "postgresql",
              "endDelimiter": ";",
              "path": "scripts/01_00_00/00/ddl/tables/app-vdyp.projection_batch_mapping.sql",
              "relativeToChangelogFile": true
            }
          },
          {
            "sqlFile":{
              "dbms":"postgresql",
              "endDelimiter":";",
              "path": "scripts/01_00_00/00/ddl/grants/app-vdyp.ddl.apply_grants.sql",
              "relativeToChangelogFile": true
            }
          }
        ],
        "rollback": [
            { "sql": "DROP TABLE \"app-vdyp\".projection_batch_mapping" },
            { "sql": "DROP TABLE \"app-vdyp\".file_mapping" },
            { "sql": "DROP TABLE \"app-vdyp\".projection" },
            { "sql": "DROP TABLE \"app-vdyp\".projection_param_preset" },
            { "sql": "DROP TABLE \"app-vdyp\".calculation_engine_code" },
            { "sql": "DROP TABLE \"app-vdyp\".projection_status_code" },
            { "sql": "DROP TABLE \"app-vdyp\".projection_file_set" },
            { "sql": "DROP TABLE \"app-vdyp\".vdyp_user" },
            { "sql": "DROP TABLE \"app-vdyp\".user_type_code" },
            { "sql": "DROP TABLE \"app-vdyp\".file_set_type_code" }
        ]
      }
    },
    {
      "changeSet": {
        "id": "01_00_00_01",
        "author": "pminter",
        "changes": [
          {
            "tagDatabase": {
              "tag": "version_01_00_00_01"
            }
          },
          {
            "sqlFile": {
              "dbms": "postgresql",
              "endDelimiter": ";",
              "path": "scripts/01_00_00/01/dml/app-vdyp.calculation_engine_code.sql",
              "relativeToChangelogFile": true
            }
          },
          {
            "sqlFile": {
              "dbms": "postgresql",
              "endDelimiter": ";",
              "path": "scripts/01_00_00/01/dml/app-vdyp.file_set_type_code.sql",
              "relativeToChangelogFile": true
            }
          },
          {
            "sqlFile": {
              "dbms": "postgresql",
              "endDelimiter": ";",
              "path": "scripts/01_00_00/01/dml/app-vdyp.projection_status_code.sql",
              "relativeToChangelogFile": true
            }
          },
          {
            "sqlFile": {
              "dbms": "postgresql",
              "endDelimiter": ";",
              "path": "scripts/01_00_00/01/dml/app-vdyp.user_type_code.sql",
              "relativeToChangelogFile": true
            }
          }
        ],
        "rollback": [
          {
            "sql": "DELETE FROM \"app-vdyp\".calculation_engine_code"
          },
          {
            "sql": "DELETE FROM \"app-vdyp\".file_set_type_code"
          },
          {
            "sql": "DELETE FROM \"app-vdyp\".projection_status_code"
          },
          {
            "sql": "DELETE FROM \"app-vdyp\".user_type_code"
          }
        ]
      }
    },
    {
      "changeSet": {
        "id": "01_00_01_00",
        "author": "pminter",
        "changes": [
          {
            "tagDatabase": {
              "tag": "version_01_00_01_00"
            }
          },
          {
            "sqlFile": {
              "dbms": "postgresql",
              "endDelimiter": ";",
              "path": "scripts/01_00_01/00/ddl/tables/app-vdyp.projection.sql",
              "relativeToChangelogFile": true
            }
          },
          {
            "sqlFile": {
              "dbms": "postgresql",
              "endDelimiter": ";",
              "path": "scripts/01_00_01/00/ddl/tables/app-vdyp.projection_batch_mapping.sql",
              "relativeToChangelogFile": true
            }
          }
        ],
        "rollback": [
          {
            "sql": "ALTER TABLE \"app-vdyp\".\"projection\" DROP COLUMN \"report_title\""
          },
          {
            "sql": "ALTER TABLE \"app-vdyp\".\"projection\" DROP COLUMN \"description\""
          },
          {
            "sql": "ALTER TABLE \"app-vdyp\".\"projection_batch_mapping\" RENAME COLUMN \"polygon_count\" TO \"partition_count\""
          },
          {
            "sql": "ALTER TABLE \"app-vdyp\".\"projection_batch_mapping\" RENAME COLUMN \"completed_polygon_count\" TO \"completed_partition_count\""
          },
          {
            "sql": "COMMENT ON COLUMN \"app-vdyp\".\"projection_batch_mapping\".\"partition_count\" IS 'Partition Count is the number of partitions that the batch job has created for the mapped projection'"
          },
          {
            "sql": "COMMENT ON COLUMN \"app-vdyp\".\"projection_batch_mapping\".\"completed_partition_count\" IS 'Completed Partition Count is the number of partitions the batch system is reporting as completed '"
          }
        ]
      }
    }
   ] 
}

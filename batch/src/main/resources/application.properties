# VDYP Batch Application Configuration
spring.application.name=VDYP Batch Processing API

# Server Configuration
server.port=8081
server.servlet.context-path=/vdyp-batch

# Batch Configuration
spring.batch.jdbc.initialize-schema=always
spring.batch.job.enabled=false
spring.batch.job.name=NONE
spring.batch.jdbc.isolation-level-for-create=SERIALIZABLE

# Job Auto-creation Configuration
batch.job.auto-create=true

# Logging Configuration
logging.level.org.springframework.batch=INFO
logging.level.org.springframework.batch.core.step=INFO
logging.level.ca.bc.gov.nrs.vdyp.batch=INFO
logging.level.ca.bc.gov.nrs.vdyp.batch.service=INFO
logging.level.ca.bc.gov.nrs.vdyp.batch.configuration=INFO

# VDYP File Processing Configuration
batch.input.file-path=classpath:input.csv

# Output Configuration
batch.output.directory.default-path=${user.home}/vdyp/output
batch.output.file-prefix=vdyp_output
batch.output.csv-header=id,data,polygonId,layerId,projectionResult

# Partitioning Configuration  
batch.partitioning.enabled=true
batch.partitioning.grid-size=4
batch.partitioning.chunk-size=1000

# Thread Pool Configuration
batch.thread-pool.core-pool-size=4
batch.thread-pool.max-pool-size-multiplier=2
batch.thread-pool.thread-name-prefix=vdyp-batch-partition-

# Production Error Handling Configuration
batch.retry.max-attempts=3
batch.retry.backoff-period=100
batch.skip.max-count=10

# Data Validation Configuration
batch.validation.max-data-length=50000
batch.validation.min-polygon-id-length=1
batch.validation.max-polygon-id-length=50

# Error Classification Configuration
batch.error.transient-patterns=timeout,connection,network,temporary,unavailable
batch.error.max-consecutive-failures=100

# Database Configuration (H2 for local development - Native compatible)
spring.datasource.url=jdbc:h2:mem:batchdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;MODE=REGULAR
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.h2.console.enabled=false
spring.h2.console.settings.web-allow-others=false

# Native Image Configuration
spring.sql.init.mode=always

# Actuator Configuration (for monitoring)
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
management.simple.metrics.export.enabled=true